<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="552" height="375" xmlns="http://www.w3.org/2000/svg" x-original-source="participant Scene (client) as C
participant Kernel (server) as S
C->S: Request {messageId}
S->C: Response {messageId,streaming=true}
C->C: Generate async iterator for {messageId}
S-->C: StreamMessage {messageId,payload}
S-->C:
S-->C:
S-->C: StreamMessage {messageId,closed=true}
C->C: Close async iterator"><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><rect x="10" y="10" width="139" height="33" style="stroke-width: 2px;" stroke="#000000" fill="#ffffff"></rect><text x="20" y="33" style="font: 14px Menlo, Monaco, &quot;Courier New&quot;, monospace;" text-anchor="start"><tspan x="20" y="33">Scene (client)</tspan></text><rect x="10" y="312" width="139" height="33" style="stroke-width: 2px;" stroke="#000000" fill="#ffffff"></rect><text x="20" y="335" style="font: 14px Menlo, Monaco, &quot;Courier New&quot;, monospace;" text-anchor="start"><tspan x="20" y="335">Scene (client)</tspan></text><line x1="79" x2="79" y1="43" y2="312" style="stroke-width: 2px;" stroke="#000000" fill="none"></line><rect x="375" y="10" width="147" height="33" style="stroke-width: 2px;" stroke="#000000" fill="#ffffff"></rect><text x="385" y="33" style="font: 14px Menlo, Monaco, &quot;Courier New&quot;, monospace;" text-anchor="start"><tspan x="385" y="33">Kernel (server)</tspan></text><rect x="375" y="312" width="147" height="33" style="stroke-width: 2px;" stroke="#000000" fill="#ffffff"></rect><text x="385" y="335" style="font: 14px Menlo, Monaco, &quot;Courier New&quot;, monospace;" text-anchor="start"><tspan x="385" y="335">Kernel (server)</tspan></text><line x1="448" x2="448" y1="43" y2="312" style="stroke-width: 2px;" stroke="#000000" fill="none"></line><text x="183" y="78" style="font: 14px Menlo, Monaco, &quot;Courier New&quot;, monospace;" text-anchor="start"><tspan x="183" y="78">Request {messageId}</tspan></text><line x1="79" x2="448" y1="83" y2="83" style="stroke-width: 2px;" stroke="#000000" fill="none" marker-end="url(#markerArrowBlock)"></line><text x="116" y="113" style="font: 14px Menlo, Monaco, &quot;Courier New&quot;, monospace;" text-anchor="start"><tspan x="116" y="113">Response {messageId,streaming=true}</tspan></text><line x1="448" x2="79" y1="118" y2="118" style="stroke-width: 2px;" stroke="#000000" fill="none" marker-end="url(#markerArrowBlock)"></line><line x1="79" x2="99" y1="133" y2="133" style="stroke-width: 2px;" stroke="#000000" fill="none"></line><line x1="99" x2="99" y1="133" y2="153" style="stroke-width: 2px;" stroke="#000000" fill="none"></line><line x1="99" x2="79" y1="153" y2="153" style="stroke-width: 2px;" stroke="#000000" fill="none" marker-end="url(#markerArrowBlock)"></line><text x="104" y="150" style="font: 14px Menlo, Monaco, &quot;Courier New&quot;, monospace;" text-anchor="start"><tspan x="104" y="150">Generate async iterator for {messageId}</tspan></text><text x="124" y="183" style="font: 14px Menlo, Monaco, &quot;Courier New&quot;, monospace;" text-anchor="start"><tspan x="124" y="183">StreamMessage {messageId,payload}</tspan></text><line x1="448" x2="79" y1="188" y2="188" style="stroke-width: 2px;" stroke="#000000" fill="none" stroke-dasharray="6px, 2px" marker-end="url(#markerArrowBlock)"></line><text x="264" y="203" style="font: 14px Menlo, Monaco, &quot;Courier New&quot;, monospace;" text-anchor="start"><tspan x="264" y="203"></tspan></text><line x1="448" x2="79" y1="208" y2="208" style="stroke-width: 2px;" stroke="#000000" fill="none" stroke-dasharray="6px, 2px" marker-end="url(#markerArrowBlock)"></line><text x="264" y="223" style="font: 14px Menlo, Monaco, &quot;Courier New&quot;, monospace;" text-anchor="start"><tspan x="264" y="223"></tspan></text><line x1="448" x2="79" y1="228" y2="228" style="stroke-width: 2px;" stroke="#000000" fill="none" stroke-dasharray="6px, 2px" marker-end="url(#markerArrowBlock)"></line><text x="107" y="258" style="font: 14px Menlo, Monaco, &quot;Courier New&quot;, monospace;" text-anchor="start"><tspan x="107" y="258">StreamMessage {messageId,closed=true}</tspan></text><line x1="448" x2="79" y1="263" y2="263" style="stroke-width: 2px;" stroke="#000000" fill="none" stroke-dasharray="6px, 2px" marker-end="url(#markerArrowBlock)"></line><line x1="79" x2="99" y1="278" y2="278" style="stroke-width: 2px;" stroke="#000000" fill="none"></line><line x1="99" x2="99" y1="278" y2="297" style="stroke-width: 2px;" stroke="#000000" fill="none"></line><line x1="99" x2="79" y1="297" y2="297" style="stroke-width: 2px;" stroke="#000000" fill="none" marker-end="url(#markerArrowBlock)"></line><text x="104" y="294" style="font: 14px Menlo, Monaco, &quot;Courier New&quot;, monospace;" text-anchor="start"><tspan x="104" y="294">Close async iterator</tspan></text></svg>